
1. 背景及目标
   
    1.1 背景
    
    1.2 目标
2. 概要设计
3. 详细设计
4. 接口设计
5. 数据结构设计
6. 存储设计
7. 外部依赖
8. 部署发布流程
9. 兼容性
10. SLA
11. 开发计划
12. 遗留问题
13. 参考
14. 
1.背景及目标

1.1 背景
产生需求的背景是什么
为什么做这件事？现有系统的痛点、不足、缺陷等问题点
可以附上相关参考链接
1.2 目标
整件工作完成后，预期达到什么样的状态，最好是清晰的可以量化的指标，作为最为最后验收的依据，如：

xx模块提速30%
内存占用减小10%
开发效率提升5%
2.概要设计
方案基本介绍、系统环境（涉及时包含）、数据规模、方案可行性调研结果；
设计思路和折衷
系统设计：系统架构图（简单的功能迭代不必包含，技术项目涉及架构变更时必须体现）、流程图、外部服务依赖、子模块（子系统）简要描述。
重点：体现自己的设计决策。
3.详细设计
方案的核心
详细阐述为实现本方案各模块职责如何划分、彼此之间如何交互？
流程图：产品/测试人员可以理解业务逻辑的具体实现过程
组件图：服务/组件之间的依赖关系，通信方式
时序图：对象之间的信息如何传递
正常逻辑、补偿逻辑、定时逻辑等
如何保证服务的可用性、一致性？安全性、可靠性如何保障？
预估性能如何？如何压测、评估、验证？
4.接口设计
解释接口的场景和作用
接口定义：请求参数、返回结果、错误码
接口处理的流程图
5.数据结构设计
方案中涉及到的核心数据结构，以何种数据存储/交互?
ER 图，数据流图，数据字典等
预估数据规模，决定是否需要进行拆分（分表、分库）

6.存储设计
redis：key-value 格式，过期时间，容量预估
kafka：topic，分区数，消费者数量，消息格式，容量预估；消息消费是否需要考虑重复消费，如何保证幂等？
ES：doc mapping，字段类型，哪些字段需要 index，哪些不需要 index，容量预估
mysql：表名、表字段、索引、容量预估
7.外部依赖
方案中涉及到的外部系统、接口、组件、服务
确认外部服务是否可用，包括：功能、稳定性、响应时间指标。引入外部服务之后，对接口整体耗时的影响。

外部服务不可用时，是否可以降级？降级时机和检测方式（监控/业务反馈）？降级方式（手动、自动）？恢复方式（手动、自动）？如果使用自动降级，是否有可能因为判断条件有误导致误降级，这种情况是否被允许？

如果功能尚未完成，需要确认完成时间，决定是否可以引入，且不影响项目进度，调研阶段需要明确，并制定备用方案，以防依赖无法按时保质交付时，项目整体推迟。



8.部署发布流程
配置项：是否有新配置？更新现有配置？
上线顺序，包括 web 机、脚本机、sql、外部服务

是否需要清理/刷历史数据？

是否灰度发布？若发布异常需要做哪些回滚措施？
9.兼容性
是否需要兼容老逻辑？如何兼容？
如何保证/验证老逻辑没有遗漏？
老逻辑什么时候下线？如何下线？
10.SLA
方案中涉及的重要/核心的监控指标，正常范围、异常触发阈值
如何告警：邮件？短信？电话？
11.开发计划
方案开发/实施需要耗费的人力预估
给出大概的开发时间表
若需要外部团队/资源配合，评审时拉外部确认工作量，交付时间等
12.遗留问题
因各种原因导致的本方案中可能存在的隐患、不足、缺陷
技术上的不确定性，潜在的人力、时间风险，存在需求通知上下游的变更等；



13.参考
列举方案设计过程中借鉴/参考的内部或外部资料
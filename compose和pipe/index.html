<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    /*
      website:https://www.jianshu.com/p/eda918cf738a
    */
    function compose() {
        //这里的slice.call是浅拷贝数组，不改变原数组，这里arguments是参数数组
        var fns = [].slice.call(arguments)
        return function (initialArg) {
            var res = initialArg
            for (var i = fns.length - 1; i > -1; i--) {
                res = fns[i](res)
            }
            return res
        }
    }

    function pipe() {
        var fns = [].slice.call(arguments)
        return function (initialAgr) {
            var res = initialAgr
            for (var i = 0; i < fns.length; i++) {
                res = fns[i](res)
            }
            return res
        }
    }

    var greet = function (name) { return 'hi:' + name }
    var exclaim = function (statement) { return statement.toUpperCase() + '!' }
    var transform = function (str) { return str.replace(/[dD]/, 'DDDDD') }
    var welcome1 = compose(greet, exclaim, transform)
    var welcome2 = pipe(greet, exclaim, transform)
    console.log(welcome1('dot'))//hi:DDDDDOT!
    console.log(welcome2('dolb'))//HI:DDDDDOLB!
  </script>
</body>
</html>